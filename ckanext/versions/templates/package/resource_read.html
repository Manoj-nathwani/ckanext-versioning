{% ckan_extends %}

{% block resource_content %}
  {% block package_revision_info %}
    {% if c.current_version and res.revision_timestamp %}
      <div class="module info alert alert-info">
        <p class="module-content">
          {% set timestamp = h.render_datetime(res.revision_timestamp, with_hours=True) %}
          {% set url = h.url_for(controller='package', action='read', id=pkg.name) %}
          {% trans timestamp=timestamp, url=url %}
            This resource is from an old revision of this dataset, as edited at {{ timestamp }}.
            It may differ significantly from the <a href="{{ url }}">current revision of the dataset</a>.
          {% endtrans %}
        </p>
      </div>
    {% endif %}
  {% endblock %}

  {{ super() }}
{% endblock %}

{% block resource_read_title %}
  <h1 class="page-heading">{{ h.resource_display_name(res) | truncate(50) }}
  {% if c.current_version %}
    <span class="label label-default">version {{ c.current_version.name }}</span>
  {% endif %}
  </h1>
{% endblock %}

{% block data_preview %}
  {% if c.current_version %}
    <div class="module warning alert alert-warning">
      {{ _('Data preview is not available for this revision of the data; You can still download the resource and view it locally.') }}
    </div>
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}